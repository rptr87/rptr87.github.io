<!DOCTYPE html>
<html lang="en">
  <!-- Beautiful Jekyll | MIT license | Copyright Dean Attali 2016 -->
  <head>
  <meta charset="utf-8" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, viewport-fit=cover">

  <title>nCine Compilation Benchmark</title>

  <meta name="author" content="Puttaraju" />

  
  <meta name="description" content="How long does it take to compile the nCine?">
  

  <link rel="alternate" type="application/rss+xml" title="My experiments with code - My experiments with code" href="/feed.xml" />

  

  

  
    
      
  <link rel="stylesheet" href="//maxcdn.bootstrapcdn.com/font-awesome/4.6.0/css/font-awesome.min.css" />

    
  

  
    
      <link rel="stylesheet" href="/css/bootstrap.min.css" />
    
      <link rel="stylesheet" href="/css/bootstrap-social.css" />
    
      <link rel="stylesheet" href="/css/main.css" />
    
  

  
    
      <link rel="stylesheet" href="//fonts.googleapis.com/css?family=Lora:400,700,400italic,700italic" />
    
      <link rel="stylesheet" href="//fonts.googleapis.com/css?family=Open+Sans:300italic,400italic,600italic,700italic,800italic,400,300,600,700,800" />
    
  

  

  

  

    <!-- Facebook OpenGraph tags -->
  

  
  <meta property="og:title" content="nCine Compilation Benchmark" />
  

   
  <meta property="og:description" content="How long does it take to compile the nCine?">
  


  <meta property="og:type" content="website" />

  
  <meta property="og:url" content="https://rptr87.github.io/2018-03-04-ncine-compilation-benchmark/" />
  <link rel="canonical" href="https://rptr87.github.io/2018-03-04-ncine-compilation-benchmark/" />
  

  
  <meta property="og:image" content="https://rptr87.github.io/img/firefox.png" />
  


  <!-- Twitter summary cards -->
  <meta name="twitter:card" content="summary" />
  <meta name="twitter:site" content="@" />
  <meta name="twitter:creator" content="@" />

  
  <meta name="twitter:title" content="nCine Compilation Benchmark" />
  

  
  <meta name="twitter:description" content="How long does it take to compile the nCine?">
  

  
  <meta name="twitter:image" content="https://rptr87.github.io/img/firefox.png" />
  

  

</head>


  <body>

    
  
    <nav class="navbar navbar-default navbar-fixed-top navbar-custom">
  <div class="container-fluid">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle" data-toggle="collapse" data-target="#main-navbar">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      
        <a class="navbar-brand" href="https://rptr87.github.io">My experiments with code</a>
      
    </div>

    <div class="collapse navbar-collapse" id="main-navbar">
      <ul class="nav navbar-nav navbar-right">
      
        
          <li>
            






<a href="/aboutme">About Me</a>

          </li>
        
        
        
          <li class="navlinks-container">
            <a class="navlinks-parent" href="javascript:void(0)">Pages</a>
            <div class="navlinks-children">
              
                
                  






<a href="/curriculum.html">Curriculum</a>

                
              
                
                  






<a href="/notes.html">Study Notes</a>

                
              
            </div>
          </li>
        
        
        
          <li>
            






<a href="https://www.linkedin.com/in/puttaraju87">LinkedIN</a>

          </li>
        
        
      </ul>
    </div>

	
	<div class="avatar-container">
	  <div class="avatar-img-border">
	    <a href="https://rptr87.github.io">
	      <img class="avatar-img" src="/img/firefox.png">
		</a>
	  </div>
	</div>
	

  </div>
</nav>


    <!-- TODO this file has become a mess, refactor it -->





<header class="header-section ">

<div class="intro-header no-img">
  <div class="container">
    <div class="row">
      <div class="col-lg-8 col-lg-offset-2 col-md-10 col-md-offset-1">
        <div class="post-heading">
          <h1>nCine Compilation Benchmark</h1>
		  
		    
			<h2 class="post-subheading">How long does it take to compile the nCine?</h2>
			
		  
		  
		  
		  <span class="post-meta">Posted on March 4, 2018</span>
		  
        </div>
      </div>
    </div>
  </div>
</div>
</header>




<div class="container">
  <div class="row">
    <div class="col-lg-8 col-lg-offset-2 col-md-10 col-md-offset-1">

      

      <article role="main" class="blog-post">
        <p>Are you curious about the time I spend to compile the nCine? <img class="emoji" title=":smile:" alt=":smile:" src="https://github.githubassets.com/images/icons/emoji/unicode/1f604.png" height="20" width="20"><br>
In this post I’m going to show how much time is needed to compile the engine on different platforms.</p>

<p>Let’s start with the hardware and the software I’ve used for my tests.</p>

<h2 id="hardware-and-software">Hardware and Software</h2>

<h3 id="xiaomi-mi-notebook-pro">Xiaomi Mi Notebook Pro</h3>

<p><strong>Hardware</strong></p>
<ul>
  <li>Intel Core i7-8550U</li>
  <li>16GB RAM, DDR4 2400 MHz, dual channel</li>
  <li>Samsung PM961 NVMe SSD, 256GB</li>
  <li>NVIDIA GeForce MX150, 2GB GDDR5</li>
</ul>

<p><strong>OS</strong></p>
<ul>
  <li>Microsoft Windows 10 Professional (x64), Build 16299.248</li>
  <li>Arch Linux x86_64, Linux 4.15.3</li>
</ul>

<h3 id="xiaomi-mi-notebook-air-13-2016">Xiaomi Mi Notebook Air 13 2016</h3>

<p><strong>Hardware</strong></p>
<ul>
  <li>Intel Core i5-6200U</li>
  <li>8GB RAM, DDR4 2133 MHz, single channel</li>
  <li>Samsung PM951 NVMe SSD, 256GB</li>
  <li>NVIDIA GeForce 940MX, 2GB GDDR5</li>
</ul>

<p><strong>OS</strong></p>
<ul>
  <li>Microsoft Windows 10 Professional (x64), Build 16299.248</li>
  <li>Arch Linux x86_64, Linux 4.15.3</li>
</ul>

<h3 id="chuwi-hi-10">Chuwi Hi 10</h3>

<p><strong>Hardware</strong></p>
<ul>
  <li>Intel Atom x5-Z8300</li>
  <li>4G RAM, DDR3 1600 MHz, single channel</li>
  <li>Hynix HCG8e eMMC 5.1, 64GB</li>
</ul>

<p><strong>OS</strong></p>
<ul>
  <li>Microsoft Windows 10 Home (x64), Build 16299.248</li>
</ul>

<h3 id="compilers-and-tools">Compilers and Tools</h3>

<p><strong>Windows</strong></p>
<ul>
  <li>VS2017 15.5.6 (MSVC 19.12.25835)</li>
  <li>CMake 3.10.2 64bit</li>
</ul>

<p><strong>MSYS2 and Arch Linux</strong></p>
<ul>
  <li>GCC 7.3.0</li>
  <li>CMake 3.10.2</li>
  <li>Ninja 1.8.2</li>
</ul>

<h2 id="results">Results</h2>

<p>The nCine version is <code class="highlighter-rouge">2018.02.r183-2d21790</code>, compiled with GLFW, <code class="highlighter-rouge">NCINE_BUILD_TESTS</code> set to <code class="highlighter-rouge">ON</code>, <code class="highlighter-rouge">NCINE_BUILD_UNIT_TESTS</code> and <code class="highlighter-rouge">NCINE_BUILD_ANDROID</code> both set to <code class="highlighter-rouge">OFF</code>.
The tests have been conducted by running the compilation process multiple times and recording the best timings.</p>

<p>In the <em>Configure</em> phase CMake is invoked in order to configure the project and generate either a Visual Studio solutions, or Makefiles, or Ninja files.
In the <em>Build</em> phase CMake is invoked with the <code class="highlighter-rouge">--build</code> option in order to build the project. It takes advantage of multiple cores to compile only if using Ninja or MSVC with the <code class="highlighter-rouge">/MP</code> option. When using standard makefiles I have additionally provided the timings of invoking <code class="highlighter-rouge">make -jN</code> for the multicore compilation.</p>

<h3 id="tables-and-charts">Tables and Charts</h3>

<h4 id="msvc">MSVC</h4>

<table>
  <thead>
    <tr>
      <th> </th>
      <th style="text-align: right">Mi Pro</th>
      <th style="text-align: right">Mi Air</th>
      <th style="text-align: right">Chuwi</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td>Configure</td>
      <td style="text-align: right">14.20s</td>
      <td style="text-align: right">12.02s</td>
      <td style="text-align: right"> </td>
    </tr>
    <tr>
      <td>Build</td>
      <td style="text-align: right">22.23s</td>
      <td style="text-align: right">32.93s</td>
      <td style="text-align: right"> </td>
    </tr>
    <tr>
      <td>Build with <code class="highlighter-rouge">/MP</code>
</td>
      <td style="text-align: right">14.87s</td>
      <td style="text-align: right">26.48s</td>
      <td style="text-align: right"> </td>
    </tr>
  </tbody>
</table>

<p><img src="/images/MSVC_chart.png" alt="MSVC chart" title="MSVC chart"></p>

<h4 id="msys2">MSYS2</h4>

<table>
  <thead>
    <tr>
      <th> </th>
      <th style="text-align: right">Mi Pro</th>
      <th style="text-align: right">Mi Air</th>
      <th style="text-align: right">Chuwi</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td>Configure Ninja</td>
      <td style="text-align: right">8.13s</td>
      <td style="text-align: right">12.33s</td>
      <td style="text-align: right">40.90s</td>
    </tr>
    <tr>
      <td>Build Ninja</td>
      <td style="text-align: right">7.13s</td>
      <td style="text-align: right">18.84s</td>
      <td style="text-align: right">55.71s</td>
    </tr>
    <tr>
      <td>Configure Make</td>
      <td style="text-align: right">14.14s</td>
      <td style="text-align: right">19.75s</td>
      <td style="text-align: right">61.13s</td>
    </tr>
    <tr>
      <td>Build Make</td>
      <td style="text-align: right">46.80s</td>
      <td style="text-align: right">66.12s</td>
      <td style="text-align: right">226.53s</td>
    </tr>
    <tr>
      <td>Build Make <code class="highlighter-rouge">-j</code>
</td>
      <td style="text-align: right">12.65s</td>
      <td style="text-align: right">30.59s</td>
      <td style="text-align: right">84.90s</td>
    </tr>
  </tbody>
</table>

<p><img src="/images/MSYS2_chart.png" alt="MSYS2 chart" title="MSYS2 chart"></p>

<h4 id="arch-linux">Arch Linux</h4>

<table>
  <thead>
    <tr>
      <th> </th>
      <th style="text-align: right">Mi Pro</th>
      <th style="text-align: right">Mi Air</th>
      <th style="text-align: right">Chuwi</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td>Configure Ninja</td>
      <td style="text-align: right">1.03s</td>
      <td style="text-align: right">1.31s</td>
      <td style="text-align: right"> </td>
    </tr>
    <tr>
      <td>Build Ninja</td>
      <td style="text-align: right">3.68s</td>
      <td style="text-align: right">7.85s</td>
      <td style="text-align: right"> </td>
    </tr>
    <tr>
      <td>Configure Make</td>
      <td style="text-align: right">1.25s</td>
      <td style="text-align: right">1.58s</td>
      <td style="text-align: right"> </td>
    </tr>
    <tr>
      <td>Build Make</td>
      <td style="text-align: right">13.56s</td>
      <td style="text-align: right">17.31s</td>
      <td style="text-align: right"> </td>
    </tr>
    <tr>
      <td>Build Make <code class="highlighter-rouge">-j</code>
</td>
      <td style="text-align: right">4.35s</td>
      <td style="text-align: right">9.17s</td>
      <td style="text-align: right"> </td>
    </tr>
  </tbody>
</table>

<p><img src="/images/ArchLinux_chart.png" alt="Arch Linux chart" title="Arch Linux chart"></p>

<h3 id="conclusions">Conclusions</h3>

<p>The Mi Notebook Pro, with its Kaby Lake R featuring 4C/8T, achieves more than double the performance of the smaller Mi Notebook Air 13 when compiling with Ninja or <code class="highlighter-rouge">make -j8</code> on all platforms. On Windows the speed-up is slightly less, but still very noticeable.<br>
The Mi Notebook Pro comes with a faster SSD and dual channel RAM which surely have affected timings. The little and fanless Chuwi Hi 10 comes last when talking about performances, but it can still configure and build the project in under 100 seconds with Ninja. <img class="emoji" title=":smile:" alt=":smile:" src="https://github.githubassets.com/images/icons/emoji/unicode/1f604.png" height="20" width="20"></p>

<p>Speaking about the configure phase, it strangely takes a bit more time on the Mi Notebook Pro compared to the slower Mi Notebook Air on Windows.
It is also interesting to note that the Ninja generator in CMake is faster than the Makefiles one on all platforms, even if the difference on Linux is barely noticeable.<br>
Speaking about Linux, I wasn’t prepared for such a big margin when compared with Windows. Can it be a matter of Ext4 vs NTFS? Or maybe a slowdown when invoking commands through the MSYS2 console? I’m not sure of the reasons but lucky me for I usually develop on Linux and then test on the supported platforms. <img class="emoji" title=":sweat_smile:" alt=":sweat_smile:" src="https://github.githubassets.com/images/icons/emoji/unicode/1f605.png" height="20" width="20"></p>

<p>I hope you have found this post interesting even if it wasn’t about a development update. They will come back soon so stay tuned! <img class="emoji" title=":wink:" alt=":wink:" src="https://github.githubassets.com/images/icons/emoji/unicode/1f609.png" height="20" width="20"></p>

      </article>

      
        <div class="blog-tags">
          Tags:
          
          
            <a href="/tags#nCine">nCine</a>
          
          
        </div>
      

      
        <!-- Check if any share-links are active -->




<section id="social-share-section">
  <span class="sr-only">Share: </span>

  
  <!--- Share on Twitter -->
    <a href="https://twitter.com/intent/tweet?text=nCine+Compilation+Benchmark+https://rptr87.github.io/2018-03-04-ncine-compilation-benchmark/" class="btn btn-social-icon btn-twitter" title="Share on Twitter">
      <span class="fa fa-fw fa-twitter" aria-hidden="true"></span>
      <span class="sr-only">Twitter</span>
    </a>
  

  

  

  
  <!--- Share on LinkedIn -->
    <a href="https://www.linkedin.com/shareArticle?mini=true&amp;url=https://rptr87.github.io/2018-03-04-ncine-compilation-benchmark/" class="btn btn-social-icon btn-linkedin" title="Share on LinkedIn">
      <span class="fa fa-fw fa-linkedin" aria-hidden="true"></span>
      <span class="sr-only">LinkedIn</span>
    </a>
  

</section>



      

      <ul class="pager blog-pager">
        
        <li class="previous">
          <a href="/2018-02-10-ncine-dev-update-3/" data-toggle="tooltip" data-placement="top" title="nCine Dev Update 3">← Previous Post</a>
        </li>
        
        
        <li class="next">
          <a href="/2018-08-06-ncine-dev-update-4/" data-toggle="tooltip" data-placement="top" title="nCine Dev Update 4">Next Post →</a>
        </li>
        
      </ul>

      
        <div class="disqus-comments">
          
        </div>
        
      
    </div>
  </div>
</div>


    <footer>
  <div class="container beautiful-jekyll-footer">
    <div class="row">
      <div class="col-lg-8 col-lg-offset-2 col-md-10 col-md-offset-1">
        <ul class="list-inline text-center footer-links">
<li>
<a href="/feed.xml" title="RSS"><span class="fa-stack fa-lg" aria-hidden="true">
                  <i class="fa fa-circle fa-stack-2x"></i>
                  <i class="fa fa-rss fa-stack-1x fa-inverse"></i>
                </span>
                <span class="sr-only">RSS</span>
              </a>
            </li>
<li>
<a href="mailto:puttaraju.r@gmail.com" title="Email me"><span class="fa-stack fa-lg" aria-hidden="true">
                  <i class="fa fa-circle fa-stack-2x"></i>
                  <i class="fa fa-envelope fa-stack-1x fa-inverse"></i>
                </span>
                <span class="sr-only">Email me</span>
              </a>
            </li>
<li>
<a href="https://github.com/github.com/rptr87/" title="GitHub"><span class="fa-stack fa-lg" aria-hidden="true">
                  <i class="fa fa-circle fa-stack-2x"></i>
                  <i class="fa fa-github fa-stack-1x fa-inverse"></i>
                </span>
                <span class="sr-only">GitHub</span>
              </a>
            </li>
<li>
<a href="https://linkedin.com/in/https://www.linkedin.com/in/puttaraju87" title="LinkedIn"><span class="fa-stack fa-lg" aria-hidden="true">
                  <i class="fa fa-circle fa-stack-2x"></i>
                  <i class="fa fa-linkedin fa-stack-1x fa-inverse"></i>
                </span>
                <span class="sr-only">LinkedIn</span>
              </a>
            </li>
</ul>
      <p class="copyright text-muted">
      Puttaraju
       • 
      2020

      

      
      </p>
          <!-- Please don't remove this, keep my open source work credited :) -->
    <p class="theme-by text-muted">
      Theme by
      <a href="http://deanattali.com/beautiful-jekyll/">beautiful-jekyll</a>
    </p>
      </div>
    </div>
  </div>
</footer>

  
    






  
    <!-- doing something a bit funky here because I want to be careful not to include JQuery twice! -->
    
      <script>
      	if (typeof jQuery == 'undefined') {
      	  document.write('<script src="/js/jquery-1.11.2.min.js"></scr' + 'ipt>');
      	}
      </script>
    
  
    <!-- doing something a bit funky here because I want to be careful not to include JQuery twice! -->
    
	<script src="/js/bootstrap.min.js"></script>
    
  
    <!-- doing something a bit funky here because I want to be careful not to include JQuery twice! -->
    
	<script src="/js/main.js"></script>
    
  




  
  </body>
</html>
